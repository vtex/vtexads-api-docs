%%{
  init: {
    "theme": "base",
    "themeVariables": {
        "primaryColor": "#FFF",
        "primaryBorderColor": "#F71963",
        "lineColor": "#F71963",
        "textColor": "#777",
        "actorTextColor": "#777"
    }
  }
}%%
sequenceDiagram
    participant Marketplace
    participant VTEXAds
    participant Seller

    Seller->>VTEXAds: Solicitar monto disponible para usar en Anuncios
    VTEXAds->>Marketplace: GET /checking_account?seller_id=SELLER_ID
    Marketplace-->>VTEXAds: 200 OK { "total": "1111.00" }
    VTEXAds-->>Seller: Mostrar monto

    Seller->>VTEXAds: Solicitar transferencia de cierto monto a Anuncios
    VTEXAds->>Marketplace: POST /checking_account/transfer
    alt Éxito Sincrónico
        Marketplace-->>VTEXAds: 201 Created { "transaction_id": "...", "status": "success" }
    else Fallo Sincrónico
        Marketplace-->>VTEXAds: 400 Bad Request { "transaction_id": "...", "status": "failure", "message": "..." }
    else Webhook Asíncrono
        Marketplace-->>VTEXAds: 202 Accepted { "transaction_id": "...", "status": "processing" }
        Marketplace->>VTEXAds: POST /webhook/marketplace/transfers <br/>{ "transaction_id": "...", "status": "success/failure", ... }
        VTEXAds-->>Marketplace: 204 OK
    end
    VTEXAds-->>Seller: Confirmar si la transferencia fue éxito o fallo
